<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –∏–≥—Ä Roblox</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        .search-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .search-input {
            padding: 10px;
            width: 200px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
            font-size: 16px;
        }
        .search-button {
            background-color: #00a2ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .search-button:hover {
            background-color: #0078cc;
        }
        .custom-search {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #ffeaa7;
        }
        .game-item {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 15px;
            border-radius: 4px;
            background-color: #fafafa;
        }
        .game-id {
            font-weight: bold;
            color: #666;
            margin-bottom: 5px;
        }
        .game-title {
            color: #333;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        .game-description {
            color: #666;
            font-size: 0.9em;
            margin: 10px 0;
            line-height: 1.4;
        }
        .game-button {
            background-color: #00a2ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            font-weight: bold;
        }
        .game-button:hover {
            background-color: #0078cc;
        }
        .custom-game-button {
            background-color: #28a745;
        }
        .custom-game-button:hover {
            background-color: #218838;
        }
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }
        .error {
            color: #d32f2f;
            background-color: #ffebee;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #f44336;
            margin: 10px 0;
        }
        .success {
            color: #2e7d32;
            background-color: #e8f5e9;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #4caf50;
            margin: 10px 0;
        }
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #00a2ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ –ü–æ–∏—Å–∫ –∏–≥—Ä Roblox</h1>
        
        <div class="search-box">
            <input type="number" id="gameIdInput" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä—ã">
            <button class="search-button" onclick="searchGameById()">üîç –ù–∞–π—Ç–∏ –∏–≥—Ä—É</button>
            <button class="search-button" onclick="loadPopularGames()">üéØ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã</button>
        </div>

        <div class="custom-search">
            <h3>üîé –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ Universe ID</h3>
            <input type="number" id="customUniverseId" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ Universe ID">
            <button class="search-button" onclick="searchCustomGame()">üöÄ –ù–∞–π—Ç–∏ —á–µ—Ä–µ–∑ API</button>
            <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                –ò—Å–ø–æ–ª—å–∑—É–µ—Ç API: https://games.synt2x.xyz/v1/games/?universeIds=ID
            </p>
        </div>
        
        <div id="status"></div>
        <div id="games-list">
            <div class="loading">–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä—ã –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã"</div>
        </div>
    </div>

    <script>
        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'loading';
            statusDiv.innerHTML = `<div class="${className}">${message}</div>`;
        }

        async function searchGameById() {
            const gameId = document.getElementById('gameIdInput').value.trim();
            
            if (!gameId) {
                updateStatus('‚ùå –í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä—ã', 'error');
                return;
            }

            updateStatus('üîç –ò—â–µ–º –∏–≥—Ä—É...');
            await searchGame(gameId);
        }

        async function searchCustomGame() {
            const universeId = document.getElementById('customUniverseId').value.trim();
            
            if (!universeId) {
                updateStatus('‚ùå –í–≤–µ–¥–∏—Ç–µ Universe ID', 'error');
                return;
            }

            updateStatus('üîç –ò—â–µ–º –∏–≥—Ä—É —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–µ API...');
            await searchGameViaCustomAPI(universeId);
        }

        async function searchGameViaCustomAPI(universeId) {
            const gamesList = document.getElementById('games-list');
            gamesList.innerHTML = '<div class="loading">–ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–µ API...</div>';

            try {
                const proxyUrl = 'https://api.allorigins.win/raw?url=' + 
                    encodeURIComponent(`https://games.synt2x.xyz/v1/games/?universeIds=${universeId}`);
                
                const response = await fetch(proxyUrl);
                
                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ HTTP: ${response.status}`);
                }
                
                const text = await response.text();
                console.log('–û—Ç–≤–µ—Ç –æ—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ API:', text);
                
                let data;
                try {
                    data = JSON.parse(text);
                } catch (e) {
                    // –ü—ã—Ç–∞–µ–º—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å JSON
                    const fixedText = text.replace(/,\s*([}\]])/g, '$1');
                    data = JSON.parse(fixedText);
                }
                
                if (data && data.length > 0) {
                    const game = data[0];
                    const gameInfo = {
                        id: game.id || universeId,
                        title: game.title || `–ò–≥—Ä–∞ #${universeId}`,
                        description: game.description || "–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç",
                        placeId: game.placeId || game.id || universeId,
                        universeId: parseInt(universeId),
                        isCustomSearch: true
                    };
                    
                    displayGames([gameInfo], gamesList, true);
                    updateStatus(`‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∏–≥—Ä–∞ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–µ API: ${gameInfo.title}`, 'success');
                } else {
                    throw new Error('–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–µ API');
                }

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:', error);
                updateStatus('‚ùå –û—à–∏–±–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞: ' + error.message, 'error');
                gamesList.innerHTML = `
                    <div class="error">
                        –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –∏–≥—Ä—É —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–µ API. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π Universe ID.
                        <br><br>–û—à–∏–±–∫–∞: ${error.message}
                    </div>
                `;
            }
        }

        async function searchGame(gameId) {
            const gamesList = document.getElementById('games-list');
            gamesList.innerHTML = '<div class="loading">–ü–æ–∏—Å–∫ –∏–≥—Ä—ã...</div>';

            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∫–∞—Å—Ç–æ–º–Ω–æ–µ API
                const customGameInfo = await searchGameViaCustomAPI(gameId);
                if (customGameInfo) {
                    return;
                }
            } catch (error) {
                console.log('–ö–∞—Å—Ç–æ–º–Ω–æ–µ API –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, –ø—Ä–æ–±—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ...');
            }

            try {
                // –ú–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API Roblox
                const gameInfo = await searchGameByPlaceId(gameId);
                
                if (gameInfo) {
                    displayGames([gameInfo], gamesList);
                    updateStatus(`‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∏–≥—Ä–∞: ${gameInfo.title}`, 'success');
                } else {
                    // –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –µ—Å–ª–∏ API –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
                    const basicGameInfo = {
                        id: parseInt(gameId),
                        title: `–ò–≥—Ä–∞ #${gameId}`,
                        description: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...",
                        placeId: parseInt(gameId)
                    };
                    
                    displayGames([basicGameInfo], gamesList);
                    updateStatus('‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –¥–æ—Å—Ç—É–ø–µ–Ω.', 'success');
                }

            } catch (error) {
                updateStatus('‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞: ' + error.message, 'error');
                gamesList.innerHTML = '<div class="error">–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –∏–≥—Ä—É</div>';
            }
        }

        async function searchGameByPlaceId(placeId) {
            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º universeId –ø–æ placeId
                const universeResponse = await fetch(
                    `https://api.roblox.com/universes/get-universe-containing-place?placeid=${placeId}`
                );
                
                if (!universeResponse.ok) throw new Error('Universe not found');
                
                const universeData = await universeResponse.json();
                const universeId = universeData.UniverseId;
                
                // –ó–∞—Ç–µ–º –ø–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–µ –ø–æ universeId
                const gameResponse = await fetch(
                    `https://games.roblox.com/v1/games?universeIds=${universeId}`
                );
                
                if (!gameResponse.ok) throw new Error('Game not found');
                
                const gameData = await gameResponse.json();
                if (gameData.data && gameData.data.length > 0) {
                    return {
                        id: parseInt(placeId),
                        title: gameData.data[0].name,
                        description: gameData.data[0].description || "–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç",
                        placeId: parseInt(placeId),
                        universeId: universeId
                    };
                }
            } catch (error) {
                console.log('–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:', error.message);
                return null;
            }
        }

        function loadPopularGames() {
            const popularGames = [
                {
                    id: 1382,
                    title: "Natural Disaster Survival",
                    description: "–í—ã–∂–∏–≤–∞–π—Ç–µ –≤ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞—Ö! –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ - —Ç–æ—Ä–Ω–∞–¥–æ, –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è, —Ü—É–Ω–∞–º–∏ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –í–∞—à–∞ —Ü–µ–ª—å - –≤—ã–∂–∏—Ç—å –ª—é–±–æ–π —Ü–µ–Ω–æ–π!",
                    placeId: 1382,
                    universeId: 599
                },
                {
                    id: 2535,
                    title: "Jailbreak",
                    description: "–ë—É–¥—å—Ç–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–æ–º –∏–ª–∏ –ø–æ–ª–∏—Ü–µ–π—Å–∫–∏–º –≤ —ç—Ç–æ–º –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ–º —Å–∏–º—É–ª—è—Ç–æ—Ä–µ —Ç—é—Ä—å–º—ã. –°–æ–≤–µ—Ä—à–∞–π—Ç–µ –ø–æ–±–µ–≥–∏, —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –ø–æ–≥–æ–Ω—è—Ö –∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ—é –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—É—é –∏–º–ø–µ—Ä–∏—é!",
                    placeId: 2535,
                    universeId: 1377
                },
                {
                    id: 142823,
                    title: "Adopt Me!",
                    description: "–£—Å—ã–Ω–æ–≤–ª—è–π—Ç–µ –∏ –≤–æ—Å–ø–∏—Ç—ã–≤–∞–π—Ç–µ –ø–∏—Ç–æ–º—Ü–µ–≤ –≤ —ç—Ç–æ–π —Å–µ–º–µ–π–Ω–æ–π —Ä–æ–ª–µ–≤–æ–π –∏–≥—Ä–µ. –°–æ–±–∏—Ä–∞–π—Ç–µ —Ä–µ–¥–∫–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö, –æ–±—É—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –¥–æ–º –∏ –∏–≥—Ä–∞–π—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏!",
                    placeId: 142823,
                    universeId: 1488
                }
            ];

            const gamesList = document.getElementById('games-list');
            displayGames(popularGames, gamesList);
            updateStatus(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${popularGames.length} –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–≥—Ä`, 'success');
        }

        function displayGames(games, gamesList, isCustomSearch = false) {
            gamesList.innerHTML = '';
            
            if (isCustomSearch) {
                const sectionTitle = document.createElement('div');
                sectionTitle.className = 'section-title';
                sectionTitle.textContent = 'üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞';
                gamesList.appendChild(sectionTitle);
            }
            
            games.forEach(game => {
                const gameElement = document.createElement('div');
                gameElement.className = 'game-item';
                
                if (isCustomSearch) {
                    gameElement.style.border = '2px solid #28a745';
                    gameElement.style.background = '#f8fff9';
                }
                
                const robloxUrl = `robloxmobile://Game/PlaceLauncher.ashx?request=RequestGame&placeId=${game.placeId || game.id}`;
                const webUrl = `https://www.roblox.com/games/${game.placeId || game.id}/`;
                
                gameElement.innerHTML = `
                    <div class="game-info">
                        <div class="game-id">üéØ ID: ${game.id}</div>
                        ${game.universeId ? `<div class="game-id">üåå Universe ID: ${game.universeId}</div>` : ''}
                        <div class="game-title">üéÆ ${game.title}</div>
                        <div class="game-description">üìù ${game.description}</div>
                    </div>
                    <div style="text-align: center; margin-top: 10px;">
                        <a href="${robloxUrl}" class="game-button ${isCustomSearch ? 'custom-game-button' : ''}" 
                           onclick="handleGameLaunch(event, ${game.placeId || game.id})">
                            üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
                        </a>
                        <a href="${webUrl}" class="game-button" target="_blank" style="background-color: #6c757d;">
                            üåê –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
                        </a>
                    </div>
                `;
                gamesList.appendChild(gameElement);
            });
        }

        function handleGameLaunch(event, gameId) {
            event.preventDefault();
            const robloxUrl = `robloxmobile://Game/PlaceLauncher.ashx?request=RequestGame&placeId=${gameId}`;
            
            console.log(`–ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã ID: ${gameId}`);
            window.location.href = robloxUrl;
            
            // Fallback –Ω–∞ –±—Ä–∞—É–∑–µ—Ä
            setTimeout(() => {
                if (!document.hidden) {
                    const webUrl = `https://www.roblox.com/games/${gameId}/`;
                    if (confirm('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Roblox –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ?')) {
                        window.open(webUrl, '_blank');
                    }
                }
            }, 1000);
        }

        // –ü–æ–∏—Å–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
        document.getElementById('gameIdInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchGameById();
            }
        });

        document.getElementById('customUniverseId').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchCustomGame();
            }
        });

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        document.addEventListener('DOMContentLoaded', loadPopularGames);
    </script>
</body>
</html>
